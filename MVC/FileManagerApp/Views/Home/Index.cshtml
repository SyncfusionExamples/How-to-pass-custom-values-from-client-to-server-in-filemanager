@{
    ViewBag.Title = "Home Page";
}


<div class="control-section">
    <div class="sample-container">
        <!--  File Manager control declaration -->
        @Html.EJS().FileManager("file").AjaxSettings(new Syncfusion.EJ2.FileManager.FileManagerAjaxSettings
            {
                Url = "http://localhost:{port}/api/FileManager/FileOperations",
                GetImageUrl = "http://localhost:{port}/api/FileManager/GetImage",
                UploadUrl = "http://localhost:{port}/api/FileManager/Upload",
                DownloadUrl = "http://localhost:{port}/api/FileManager/Download"
            })
            .BeforeSend("onBeforeSend")
            .BeforeDownload("onBeforeDownload")
            .BeforeImageLoad("onBeforeImageLoad").Render()
        <!-- end of File Manager control -->
    </div>    
</div>

<script>
    function onBeforeSend(args) {
        args.ajaxSettings.beforeSend = function (args) {
            args.httpRequest.setRequestHeader('Authorization', 'User1');
        };
    }
    function onBeforeDownload(args) {
        args.useFormPost = false;
        if (args.ajaxSettings) {
            args.ajaxSettings.beforeSend = function (args) {
                args.fetchRequest.headers.append('Authorization', 'User1');
            };
        }
    }
    function onBeforeImageLoad(args) {
        args.useImageAsUrl = false;
        // Check if ajaxSettings are present in the arguments
        if (args.ajaxSettings) {
            (args.ajaxSettings).beforeSend = function (args) {
                // Append Authorization header with value 'User1' to fetchRequest headers
                args.fetchRequest.headers.append('Authorization', 'User1');
            };
        }
    }
</script>
